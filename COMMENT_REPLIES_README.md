# Функціональність відповідей на коментарі

## Опис

Додано можливість відповідати на коментарі в додатку YummyAnimeList. Користувачі тепер можуть:

1. Натискати кнопку "Відповісти" під будь-яким коментарем
2. Переходити на окремий екран з відповідями
3. Бачити оригінальний коментар та всі відповіді на нього
4. Додавати нові відповіді

## Зміни в коді

### 1. Новий екран: `screens/CommentRepliesScreen.js`
- Відображає оригінальний коментар зверху
- Показує список всіх відповідей
- Має форму для додавання нових відповідей
- Підтримує pull-to-refresh та пагінацію

### 2. Оновлений компонент: `components/Cards/CommentCard.js`
- Додано індикатор відповідей з лінією та кількістю
- При натисканні на "Відповісти" або індикатор переходить на екран відповідей
- Автоматично завантажує кількість відповідей для кожного коментаря

### 3. Оновлений компонент: `components/CommentForm/CommentForm.js`
- Додано підтримку відповідей через параметр `isReply`
- При відповіді передає `parent` параметр в API
- Змінює placeholder тексту для відповідей

### 4. Оновлена навігація: `navigation/RootNavigator.js`
- Додано новий екран `CommentRepliesScreen` до стеку навігації

## API Endpoints

### Отримання відповідей
```
GET https://api.hikka.io/comments/thread/{comment_reference}
```

### Додавання відповіді
```
PUT https://api.hikka.io/comments/{contentType}/{slug}
Body: {
  "text": "Текст відповіді",
  "parent": "reference_батьківського_коментаря"
}
```

## Використання

1. **Перегляд коментарів**: Відкрийте будь-який екран з коментарями
2. **Відповідь на коментар**: Натисніть текст "Відповісти" під коментарем
3. **Перегляд відповідей**: Натисніть на індикатор "Показати X відповідей >" або текст "Відповісти"
4. **Додавання відповіді**: Використовуйте форму внизу екрану відповідей

## Особливості

- **Оптимістичні оновлення**: Відповіді з'являються миттєво
- **Обробка помилок**: Граційна обробка випадків, коли API не підтримує відповіді
- **Одноразове завантаження**: API thread повертає всі відповіді одразу
- **Pull-to-refresh**: Можливість оновлення списку відповідей
- **Адаптивний дизайн**: Підтримка різних розмірів екрану

## Технічні деталі

### Параметри навігації
```javascript
navigation.navigate('CommentRepliesScreen', {
  parentComment: item,        // Об'єкт батьківського коментаря
  contentType: 'anime',       // Тип контенту (anime, manga, etc.)
  slug: slug,                 // Slug контенту
  title: 'Відповіді на коментар' // Заголовок екрану
});
```

### Структура даних
```javascript
// Батьківський коментар
{
  reference: "comment_ref",
  text: "Текст коментаря",
  author: { username: "user", avatar: "url" },
  created: 1234567890
}

// Відповідь
{
  reference: "reply_ref",
  text: "Текст відповіді",
  parent: "comment_ref",  // Посилання на батьківський коментар
  author: { username: "user", avatar: "url" },
  created: 1234567890
}
```

## Можливі покращення

1. **Вкладені відповіді**: Підтримка відповідей на відповіді (глибина > 1)
2. **Сповіщення**: Push-сповіщення про нові відповіді
3. **Цитування**: Можливість цитувати частини оригінального коментаря
4. **Модерація**: Спеціальні права для модераторів
5. **Аналітика**: Відстеження популярності коментарів
